{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"E:\\\\React_mobile_brand\\\\CDTN-2\\\\src\\\\screens\\\\ProductDetail.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { SafeAreaView } from 'react-navigation';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport MaterialIcons from \"@expo/vector-icons/MaterialIcons\";\nimport Carousel from \"./../components/Carousel\";\nimport COLORS from \"../consts/Colors\";\nimport RatingComment from \"../components/RatingComment\";\nimport Comment from \"../components/Comment\";\nimport { useNavigation } from \"./../utils/useNavigation\";\nimport { Rating } from 'react-native-elements';\nimport { getProduct } from \"../redux\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addComment, getComments } from \"../redux/actions/commentActions\";\nimport { addCart } from \"../redux/actions/cartActions\";\nimport { getUserInfo } from \"../redux/actions/userActions\";\nimport { vnd } from \"../consts/Selector\";\nexport default function ProductDetail(props) {\n  var _this = this;\n\n  var _useNavigation = useNavigation(),\n      navigate = _useNavigation.navigate;\n\n  var navigation = props.navigation,\n      route = props.route;\n  var getParam = navigation.getParam,\n      goBack = navigation.goBack;\n  var id = getParam('id');\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoadingComment = _useState4[0],\n      setIsLoadingComment = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoadingAddCart = _useState6[0],\n      setIsLoadingAddCart = _useState6[1];\n\n  var productState = useSelector(function (state) {\n    return state.productReducer;\n  });\n  var commentState = useSelector(function (state) {\n    return state.commentReducer;\n  });\n  var cartState = useSelector(function (state) {\n    return state.cartReducer;\n  });\n  var product = productState.product;\n  var comment = commentState.comment;\n  var status = cartState.status;\n  var dispatch = useDispatch();\n  var userState = useSelector(function (state) {\n    return state.userReducer;\n  });\n  var userInfor = userState.userInfor;\n  useEffect(function () {\n    dispatch(getProduct(id));\n    dispatch(getComments(id));\n    dispatch(getUserInfo());\n  }, []);\n  useEffect(function () {\n    if (product) {\n      setIsLoading(true);\n    }\n  }, [productState, commentState]);\n  useEffect(function () {\n    if (comment && !isLoadingComment) {\n      setIsLoadingComment(true);\n    }\n  }, [commentState]);\n  useEffect(function () {\n    if (status && isLoadingAddCart) {\n      var message = status === 'success' ? 'Đã thêm vào giỏ hàng' : 'Thêm vào giỏ hàng thất bại';\n      Alert.alert(\"Thông báo\", message, [{\n        text: \"OK\"\n      }]);\n      setIsLoadingAddCart(false);\n    }\n  }, [cartState]);\n\n  var onTap = function onTap(comment_content, comment_rating) {\n    if (userInfor) {\n      dispatch(addComment(id, userInfor.user_id, comment_content, comment_rating));\n    } else {\n      Alert.alert(\"Thông báo!\", \"Chưa đăng nhập!\", [{\n        text: \"OK\"\n      }]);\n    }\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, !isLoading ? React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 18\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#00ff00\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  })) : React.createElement(ScrollView, {\n    showsVerticalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 18\n    }\n  }, React.createElement(View, {\n    style: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, React.createElement(TouchableOpacity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, React.createElement(MaterialIcons, {\n    style: styles.headerIcon,\n    name: \"arrow-back\",\n    size: 30,\n    color: \"white\",\n    onPress: function onPress() {\n      return navigation.goBack();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  })), React.createElement(TouchableOpacity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, React.createElement(MaterialIcons, {\n    onPress: function onPress() {\n      return navigate('cart');\n    },\n    style: styles.headerIcon,\n    name: \"shopping-cart\",\n    color: \"white\",\n    size: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }))), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, product && React.createElement(Carousel, {\n    images: product.product_image,\n    auto: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 37\n    }\n  })), React.createElement(View, {\n    style: styles.detailContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, product && product.product_rating ? React.createElement(View, {\n    style: {\n      alignItems: 'center',\n      flexDirection: 'row',\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, React.createElement(Rating, {\n    readonly: true,\n    imageSize: 28,\n    fractions: \"{1}\",\n    startingValue: product.product_rating.toFixed(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: {\n      marginLeft: 20,\n      color: '#444',\n      fontSize: 22\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, product.product_rating.toFixed(1))) : React.createElement(View, {\n    style: {\n      alignItems: 'center',\n      flexDirection: 'row',\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, React.createElement(Rating, {\n    readonly: true,\n    imageSize: 28,\n    fractions: \"{1}\",\n    startingValue: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: {\n      marginLeft: 20,\n      color: '#444',\n      fontSize: 22\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 33\n    }\n  }, 0)), product && React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 37\n    }\n  }, product.product_title), React.createElement(View, {\n    style: {\n      display: 'flex',\n      flexDirection: 'row'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: 'column',\n      alignItems: 'flex-start'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, product && product.product_sale != 0 && React.createElement(Text, {\n    style: {\n      textDecorationLine: 'line-through',\n      color: 'gray',\n      fontSize: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 75\n    }\n  }, vnd(product.product_price), \"\\u0111\"), product && React.createElement(Text, {\n    style: {\n      marginBottom: 10,\n      color: 'red',\n      fontSize: 29\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 45\n    }\n  }, vnd(product.product_price * (100 - product.product_sale) / 100), \"\\u0111\")), React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, !isLoadingAddCart && React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      dispatch(addCart(id));\n      setIsLoadingAddCart(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 37\n    }\n  }, React.createElement(Text, {\n    style: styles.btnBuy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 41\n    }\n  }, \"Add Cart\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      navigate('Shop', {\n        shop_id: product.shop_id\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, React.createElement(Text, {\n    style: styles.btnBuy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, \"Shop\")))), React.createElement(Text, {\n    style: styles.headerTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \"M\\xF4 t\\u1EA3 s\\u1EA3n ph\\u1EA9m :\"), React.createElement(Text, {\n    style: styles.desc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, product && product.product_description), React.createElement(Text, {\n    style: styles.headerTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"\\u0110\\xE1nh gi\\xE1 & nh\\u1EADn x\\xE9t :\"), isLoadingComment && React.createElement(RatingComment, {\n    onTap: onTap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  }), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, comment && comment.map(function (comment, index) {\n    return React.createElement(View, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 37\n      }\n    }, React.createElement(Comment, {\n      starNumber: comment.comment_rating,\n      user: comment.user,\n      comment_content: comment.comment_content,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 41\n      }\n    }));\n  })))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'white',\n    marginTop: 35\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    padding: 5,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 2\n  },\n  headerIcon: {\n    backgroundColor: 'rgba(0, 0, 0, 0.6)',\n    borderRadius: 50,\n    padding: 5\n  },\n  detailContainer: {\n    flex: 0.55,\n    marginHorizontal: 7,\n    borderRadius: 20,\n    padding: 5,\n    backgroundColor: 'white'\n  },\n  title: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    color: COLORS.primary,\n    marginBottom: 10\n  },\n  headerTitle: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    color: '#111'\n  },\n  desc: {\n    fontSize: 18,\n    lineHeight: 25,\n    color: '#111',\n    padding: 2\n  },\n  btnBuy: {\n    backgroundColor: '#00FF7F',\n    padding: 7,\n    width: 150,\n    borderRadius: 20,\n    marginBottom: 10,\n    fontSize: 18,\n    textAlign: 'center',\n    fontWeight: '700',\n    color: '#222'\n  }\n});","map":{"version":3,"sources":["E:/React_mobile_brand/CDTN-2/src/screens/ProductDetail.tsx"],"names":["React","useState","useEffect","SafeAreaView","MaterialIcons","Carousel","COLORS","RatingComment","Comment","useNavigation","Rating","getProduct","useDispatch","useSelector","addComment","getComments","addCart","getUserInfo","vnd","ProductDetail","props","navigate","navigation","route","getParam","goBack","id","isLoading","setIsLoading","isLoadingComment","setIsLoadingComment","isLoadingAddCart","setIsLoadingAddCart","productState","state","productReducer","commentState","commentReducer","cartState","cartReducer","product","comment","status","dispatch","userState","userReducer","userInfor","message","Alert","alert","text","onTap","comment_content","comment_rating","user_id","styles","container","header","headerIcon","product_image","detailContainer","product_rating","alignItems","flexDirection","marginBottom","toFixed","marginLeft","color","fontSize","title","product_title","display","flex","product_sale","textDecorationLine","product_price","justifyContent","btnBuy","shop_id","headerTitle","desc","product_description","map","index","user","StyleSheet","create","backgroundColor","marginTop","padding","position","top","left","right","zIndex","borderRadius","marginHorizontal","fontWeight","primary","lineHeight","width","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { SafeAreaView } from 'react-navigation'\r\nimport { View, StyleSheet, Text, TouchableOpacity, ScrollView, ActivityIndicator, Alert } from 'react-native';\r\nimport MaterialIcons from 'react-native-vector-icons/MaterialIcons';\r\nimport Carousel from './../components/Carousel';\r\nimport COLORS from '../consts/Colors';\r\nimport RatingComment from '../components/RatingComment';\r\nimport Comment from '../components/Comment';\r\nimport { useNavigation } from './../utils/useNavigation';\r\nimport { Rating } from 'react-native-elements';\r\nimport { CommentModel, getProduct, ProductModel, State } from '../redux';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addComment, getComments } from '../redux/actions/commentActions';\r\nimport { addCart } from '../redux/actions/cartActions';\r\nimport { getUserInfo } from '../redux/actions/userActions';\r\nimport { vnd } from '../consts/Selector';\r\nexport default function ProductDetail(props: any) {\r\n    const { navigate } = useNavigation();\r\n    const { navigation, route } = props;\r\n    const { getParam, goBack } = navigation;\r\n    const id = getParam('id');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isLoadingComment, setIsLoadingComment] = useState(false);\r\n    const [isLoadingAddCart, setIsLoadingAddCart] = useState(false);\r\n    const productState = useSelector((state: State) => state.productReducer);\r\n    const commentState = useSelector((state: State) => state.commentReducer);\r\n    const cartState = useSelector((state: State) => state.cartReducer);\r\n    const { product } = productState;\r\n    const { comment } = commentState;\r\n    const { status } = cartState;\r\n    const dispatch = useDispatch();\r\n    const userState = useSelector((state: State) => state.userReducer);\r\n    const { userInfor } = userState;\r\n\r\n    useEffect(() => {\r\n        dispatch(getProduct(id));\r\n        dispatch(getComments(id));\r\n        dispatch(getUserInfo());\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (product) {\r\n            setIsLoading(true);\r\n        }\r\n    }, [productState, commentState])\r\n\r\n    useEffect(() => {\r\n        if (comment && !isLoadingComment) {\r\n            setIsLoadingComment(true);\r\n        }\r\n    }, [commentState])\r\n\r\n    useEffect(() => {\r\n        if (status && isLoadingAddCart) {\r\n            const message = (status === 'success') ? 'Đã thêm vào giỏ hàng' : 'Thêm vào giỏ hàng thất bại';\r\n            Alert.alert(\r\n                \"Thông báo\",\r\n                message,\r\n                [\r\n                    { text: \"OK\"},\r\n                ]\r\n            );\r\n            setIsLoadingAddCart(false);\r\n        }\r\n    }, [cartState])\r\n\r\n\r\n    const onTap = (comment_content: string, comment_rating: number) => {\r\n        if (userInfor) {\r\n            dispatch(addComment(id, userInfor.user_id, comment_content, comment_rating));\r\n        } else {\r\n            Alert.alert(\r\n                \"Thông báo!\",\r\n                \"Chưa đăng nhập!\",\r\n                [\r\n                    { text: \"OK\" }\r\n                ]\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <SafeAreaView style={styles.container}>\r\n            {!isLoading ?\r\n                (<View style={styles.container}>\r\n                    <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n                </View>) :\r\n                (<ScrollView showsVerticalScrollIndicator={false}>\r\n                    <View style={styles.header}>\r\n                        <TouchableOpacity>\r\n                            <MaterialIcons style={styles.headerIcon} name=\"arrow-back\" size={30} color=\"white\" onPress={() => navigation.goBack()} />\r\n                        </TouchableOpacity>\r\n                        <TouchableOpacity>\r\n                            <MaterialIcons onPress={() => navigate('cart')} style={styles.headerIcon} name=\"shopping-cart\" color=\"white\" size={30} />\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    <View >\r\n                        {product && <Carousel images={product.product_image} auto={false} />}\r\n                    </View>\r\n                    <View style={styles.detailContainer}>\r\n                        {product && product.product_rating ?\r\n                            <View style={{ alignItems: 'center', flexDirection: 'row', marginBottom: 10 }}>\r\n                                <Rating readonly imageSize={28} fractions=\"{1}\" startingValue={product.product_rating!.toFixed(1)} />\r\n                                <Text style={{ marginLeft: 20, color: '#444', fontSize: 22 }}>{product.product_rating!.toFixed(1)}</Text>\r\n                            </View>\r\n                            :\r\n                            <View style={{ alignItems: 'center', flexDirection: 'row', marginBottom: 10 }}>\r\n                                <Rating readonly imageSize={28} fractions=\"{1}\" startingValue={0} />\r\n                                <Text style={{ marginLeft: 20, color: '#444', fontSize: 22 }}>{0}</Text>\r\n                            </View>\r\n                        }\r\n                        {product && <Text style={styles.title}>{product.product_title}</Text>}\r\n                        <View style={{ display: 'flex', flexDirection: 'row' }}>\r\n                            <View style={{ flex: 1, flexDirection: 'column', alignItems: 'flex-start' }}>\r\n                                {product && product.product_sale! != 0 && <Text style={{ textDecorationLine: 'line-through', color: 'gray', fontSize: 25 }}>{vnd(product.product_price)}đ</Text>}\r\n                                {product && <Text style={{ marginBottom: 10, color: 'red', fontSize: 29 }}>{vnd(product.product_price! * (100 - product.product_sale!) / 100)}đ</Text>}\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\r\n                                {\r\n                                    !isLoadingAddCart &&\r\n                                    <TouchableOpacity onPress={() => {\r\n                                        dispatch(addCart(id));\r\n                                        setIsLoadingAddCart(true);\r\n                                    }}>\r\n                                        <Text style={styles.btnBuy}>Add Cart</Text>\r\n                                    </TouchableOpacity>\r\n                                }\r\n                                <TouchableOpacity onPress={() => {\r\n                                    navigate('Shop', { shop_id: product!.shop_id });\r\n                                }}>\r\n                                    <Text style={styles.btnBuy}>Shop</Text>\r\n                                </TouchableOpacity>\r\n\r\n                            </View>\r\n                        </View>\r\n\r\n                        <Text style={styles.headerTitle}>Mô tả sản phẩm :</Text>\r\n                        <Text style={styles.desc}>\r\n                            {\r\n                                product && product.product_description\r\n                            }\r\n                        </Text>\r\n\r\n                        <Text style={styles.headerTitle}>Đánh giá & nhận xét :</Text>\r\n\r\n                        {\r\n                            isLoadingComment &&\r\n                            <RatingComment onTap={onTap} />\r\n                        }\r\n\r\n                        <View>\r\n                            {\r\n                                comment && comment.map((comment: CommentModel, index: number) =>\r\n                                    <View key={index}>\r\n                                        <Comment starNumber={comment.comment_rating} user={comment.user} comment_content={comment.comment_content} />\r\n                                    </View>\r\n                                )\r\n                            }\r\n                        </View>\r\n\r\n                    </View>\r\n                </ScrollView>\r\n                )}\r\n        </SafeAreaView>\r\n    )\r\n}\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: 'white',\r\n        marginTop: 35\r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        padding: 5,\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        zIndex: 2\r\n    },\r\n    headerIcon: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.6)',\r\n        borderRadius: 50,\r\n        padding: 5\r\n    },\r\n    detailContainer: {\r\n        flex: 0.55,\r\n        marginHorizontal: 7,\r\n        borderRadius: 20,\r\n        padding: 5,\r\n        backgroundColor: 'white'\r\n    },\r\n    title: {\r\n        fontSize: 30,\r\n        fontWeight: 'bold',\r\n        color: COLORS.primary,\r\n        marginBottom: 10\r\n    },\r\n    headerTitle: {\r\n        fontSize: 22,\r\n        fontWeight: 'bold',\r\n        color: '#111'\r\n    },\r\n    desc: {\r\n        fontSize: 18,\r\n        lineHeight: 25,\r\n        color: '#111',\r\n        padding: 2\r\n    },\r\n    btnBuy: {\r\n        backgroundColor: '#00FF7F',\r\n        padding: 7,\r\n        width: 150,\r\n        borderRadius: 20,\r\n        marginBottom: 10,\r\n        fontSize: 18,\r\n        textAlign: 'center',\r\n        fontWeight: '700',\r\n        color: '#222'\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}