{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"E:\\\\React_mobile_brand\\\\CDTN-2\\\\src\\\\screens\\\\Home.tsx\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport Category from \"../components/Category\";\nimport HeaderBar from \"../components/HeaderBar\";\nimport { getProductsHot, getProductsNew, getProductsCategory, getSlider } from \"../redux\";\nimport { getCategory } from \"../redux/actions/categoryActions\";\nimport Carousel from \"./../components/Carousel\";\nimport Product from \"./../components/Product\";\nimport { useNavigation } from \"./../utils/useNavigation\";\nvar WIDTH = Dimensions.get('window').width;\nexport default function Home() {\n  var _this = this;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      catergoryIndex = _useState2[0],\n      setCategoryIndex = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoadingCategory = _useState6[0],\n      setIsLoadingCategory = _useState6[1];\n\n  var productState = useSelector(function (state) {\n    return state.productReducer;\n  });\n  var sliderState = useSelector(function (state) {\n    return state.sliderReducer;\n  });\n  var categoryState = useSelector(function (state) {\n    return state.categoryReducer;\n  });\n  var categories = categoryState.categories;\n  var productHot = productState.productHot,\n      productNew = productState.productNew,\n      productCategory = productState.productCategory;\n  var slider = sliderState.slider;\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      _slider = _useState8[0],\n      _setSlider = _useState8[1];\n\n  var dispatch = useDispatch();\n\n  var _useNavigation = useNavigation(),\n      navigate = _useNavigation.navigate;\n\n  useEffect(function () {\n    dispatch(getProductsNew());\n    dispatch(getProductsHot());\n    dispatch(getCategory());\n    dispatch(getSlider());\n  }, []);\n  useEffect(function () {\n    if (productHot && productNew && productCategory && slider && isLoadingCategory) {\n      var tempArr = [];\n\n      for (var _iterator = _createForOfIteratorHelperLoose(slider), _step; !(_step = _iterator()).done;) {\n        var iterator = _step.value;\n        tempArr.push(iterator.slider_image);\n      }\n\n      _setSlider(tempArr);\n\n      setIsLoading(true);\n    }\n\n    if (!isLoadingCategory) {\n      setIsLoadingCategory(true);\n    }\n  }, [productState, sliderState]);\n  useEffect(function () {\n    if (categories && !productCategory) {\n      dispatch(getProductsCategory(categories[0].category_id));\n    }\n  }, [categoryState]);\n\n  var onTapDetail = function onTapDetail(id) {\n    navigate('ProductDetail', {\n      id: id\n    });\n  };\n\n  var searchProduct = function searchProduct(data) {\n    navigate('Search', {\n      data: data,\n      title: 'Tìm kiếm'\n    });\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 40,\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, React.createElement(HeaderBar, {\n    onSearch: searchProduct,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })), !isLoading ? React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 22\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#00ff00\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  })) : React.createElement(ScrollView, {\n    showsVerticalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, _slider && React.createElement(Carousel, {\n    images: _slider,\n    auto: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 45\n    }\n  })), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, categories && categories.map(function (item, index) {\n    return React.createElement(View, {\n      key: index,\n      style: {\n        marginLeft: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 41\n      }\n    }, React.createElement(Category, {\n      item: item,\n      index: index,\n      catergoryIndex: catergoryIndex,\n      onTap: function onTap() {\n        setIsLoadingCategory(false);\n        var id = Number(item.category_id);\n        dispatch(getProductsCategory(id));\n        setCategoryIndex(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 45\n      }\n    }));\n  })), React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, !isLoadingCategory ? React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 42\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#00ff00\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 45\n    }\n  })) : productCategory && productCategory.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      type: \"NEW\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 100\n      }\n    });\n  })), React.createElement(View, {\n    style: styles.productContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, React.createElement(Image, {\n    style: {\n      height: 70,\n      width: WIDTH\n    },\n    source: require(\"../images/sanpnew.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  })), React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, productNew && productNew.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      type: \"HOT\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 86\n      }\n    });\n  })), React.createElement(View, {\n    style: styles.productContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, React.createElement(Image, {\n    style: {\n      height: 70,\n      width: WIDTH\n    },\n    source: require(\"../images/sanpnoibat.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  })), React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, productHot && productHot.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      type: \"NEW\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 86\n      }\n    });\n  }))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#E5E5E5'\n  },\n  productContainer: {\n    flex: 1,\n    marginBottom: 20,\n    marginTop: 10\n  },\n  productsTitle: {\n    textAlign: 'center',\n    padding: 10,\n    color: '#fff7f7',\n    fontWeight: 'bold',\n    fontSize: 20,\n    backgroundColor: '#FF00FF'\n  },\n  productList: {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around'\n  }\n});","map":{"version":3,"sources":["E:/React_mobile_brand/CDTN-2/src/screens/Home.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","Category","HeaderBar","getProductsHot","getProductsNew","getProductsCategory","getSlider","getCategory","Carousel","Product","useNavigation","WIDTH","Dimensions","get","width","Home","catergoryIndex","setCategoryIndex","isLoading","setIsLoading","isLoadingCategory","setIsLoadingCategory","productState","state","productReducer","sliderState","sliderReducer","categoryState","categoryReducer","categories","productHot","productNew","productCategory","slider","_slider","_setSlider","dispatch","navigate","tempArr","iterator","push","slider_image","category_id","onTapDetail","id","searchProduct","data","title","styles","container","marginTop","marginBottom","flexDirection","map","item","index","marginLeft","Number","productList","product","productContainer","height","require","StyleSheet","create","flex","backgroundColor","productsTitle","textAlign","padding","color","fontWeight","fontSize","display","flexWrap","justifyContent"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;;AAEA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,OAAOC,QAAP;AACA,OAAOC,SAAP;AACA,SAAgBC,cAAhB,EAAgCC,cAAhC,EAAgDC,mBAAhD,EAAqEC,SAArE;AACA,SAASC,WAAT;AAEA,OAAOC,QAAP;AACA,OAAOC,OAAP;AACA,SAASC,aAAT;AAEA,IAAMC,KAAK,GAAGC,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBC,KAAvC;AAEA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAC3B,kBAA2ClB,QAAQ,CAAS,CAAT,CAAnD;AAAA;AAAA,MAAOmB,cAAP;AAAA,MAAuBC,gBAAvB;;AACA,mBAAkCpB,QAAQ,CAAU,KAAV,CAA1C;AAAA;AAAA,MAAOqB,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAAkDtB,QAAQ,CAAU,IAAV,CAA1D;AAAA;AAAA,MAAOuB,iBAAP;AAAA,MAA0BC,oBAA1B;;AACA,MAAMC,YAAY,GAAGtB,WAAW,CAAC,UAACuB,KAAD;AAAA,WAAkBA,KAAK,CAACC,cAAxB;AAAA,GAAD,CAAhC;AACA,MAAMC,WAAW,GAAGzB,WAAW,CAAC,UAACuB,KAAD;AAAA,WAAkBA,KAAK,CAACG,aAAxB;AAAA,GAAD,CAA/B;AACA,MAAMC,aAAa,GAAG3B,WAAW,CAAC,UAACuB,KAAD;AAAA,WAAkBA,KAAK,CAACK,eAAxB;AAAA,GAAD,CAAjC;AACA,MAAQC,UAAR,GAAuBF,aAAvB,CAAQE,UAAR;AACA,MAAQC,UAAR,GAAoDR,YAApD,CAAQQ,UAAR;AAAA,MAAoBC,UAApB,GAAoDT,YAApD,CAAoBS,UAApB;AAAA,MAAgCC,eAAhC,GAAoDV,YAApD,CAAgCU,eAAhC;AACA,MAAQC,MAAR,GAAmBR,WAAnB,CAAQQ,MAAR;;AACA,mBAA8BpC,QAAQ,CAAW,EAAX,CAAtC;AAAA;AAAA,MAAOqC,OAAP;AAAA,MAAgBC,UAAhB;;AACA,MAAMC,QAAQ,GAAGrC,WAAW,EAA5B;;AACA,uBAAqBW,aAAa,EAAlC;AAAA,MAAQ2B,QAAR,kBAAQA,QAAR;;AAEAvC,EAAAA,SAAS,CAAC,YAAM;AACZsC,IAAAA,QAAQ,CAAChC,cAAc,EAAf,CAAR;AACAgC,IAAAA,QAAQ,CAACjC,cAAc,EAAf,CAAR;AACAiC,IAAAA,QAAQ,CAAC7B,WAAW,EAAZ,CAAR;AACA6B,IAAAA,QAAQ,CAAC9B,SAAS,EAAV,CAAR;AACH,GALQ,EAKN,EALM,CAAT;AAOAR,EAAAA,SAAS,CAAC,YAAM;AAEZ,QAAIgC,UAAU,IAAIC,UAAd,IAA4BC,eAA5B,IAA+CC,MAA/C,IAAyDb,iBAA7D,EAAgF;AAC5E,UAAIkB,OAAc,GAAG,EAArB;;AACA,2DAAuBL,MAAvB,wCAAgC;AAAA,YAArBM,QAAqB;AAC5BD,QAAAA,OAAO,CAACE,IAAR,CAAaD,QAAQ,CAACE,YAAtB;AACH;;AACDN,MAAAA,UAAU,CAACG,OAAD,CAAV;;AACAnB,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AACD,QAAI,CAACC,iBAAL,EAAwB;AACpBC,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH;AACJ,GAbQ,EAaN,CAACC,YAAD,EAAeG,WAAf,CAbM,CAAT;AAeA3B,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAI+B,UAAU,IAAI,CAACG,eAAnB,EAAoC;AAChCI,MAAAA,QAAQ,CAAC/B,mBAAmB,CAACwB,UAAU,CAAE,CAAF,CAAV,CAAea,WAAhB,CAApB,CAAR;AACH;AACJ,GAJQ,EAIN,CAACf,aAAD,CAJM,CAAT;;AAOA,MAAMgB,WAAW,GAAG,SAAdA,WAAc,CAACC,EAAD,EAAgB;AAChCP,IAAAA,QAAQ,CAAC,eAAD,EAAkB;AAAEO,MAAAA,EAAE,EAAFA;AAAF,KAAlB,CAAR;AACH,GAFD;;AAIA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD,EAAe;AACjCT,IAAAA,QAAQ,CAAC,QAAD,EAAW;AAAES,MAAAA,IAAI,EAAEA,IAAR;AAAcC,MAAAA,KAAK,EAAE;AAArB,KAAX,CAAR;AACH,GAFD;;AAIA,SACI,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAEC,MAAM,CAACC,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE,EAAb;AAAgBC,MAAAA,YAAY,EAAC;AAA7B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,SAAD;AAAW,IAAA,QAAQ,EAAEN,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAFJ,EAMQ,CAAC3B,SAAD,GACK,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE8B,MAAM,CAACC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,oBAAC,iBAAD;AAAmB,IAAA,IAAI,EAAC,OAAxB;AAAgC,IAAA,KAAK,EAAC,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADL,GAIQ,oBAAC,UAAD;AAAY,IAAA,4BAA4B,EAAE,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKf,OAAO,IAAI,oBAAC,QAAD;AAAU,IAAA,MAAM,EAAEA,OAAlB;AAA2B,IAAA,IAAI,EAAE,IAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADhB,CAFJ,EAMI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEkB,MAAAA,aAAa,EAAE,KAAjB;AAAwBD,MAAAA,YAAY,EAAE;AAAtC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGQtB,UAAU,IAAIA,UAAU,CAACwB,GAAX,CAAe,UAACC,IAAD,EAAOC,KAAP;AAAA,WACzB,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEA,KAAX;AAAkB,MAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE;AAAd,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEF,IAAhB;AAAsB,MAAA,KAAK,EAAEC,KAA7B;AAAoC,MAAA,cAAc,EAAEvC,cAApD;AAAoE,MAAA,KAAK,EAAE,iBAAM;AAC7EK,QAAAA,oBAAoB,CAAC,KAAD,CAApB;AACA,YAAMuB,EAAU,GAAGa,MAAM,CAACH,IAAI,CAACZ,WAAN,CAAzB;AACAN,QAAAA,QAAQ,CAAC/B,mBAAmB,CAACuC,EAAD,CAApB,CAAR;AACA3B,QAAAA,gBAAgB,CAACsC,KAAD,CAAhB;AACH,OALD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADyB;AAAA,GAAf,CAHtB,CANJ,EAsBI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEP,MAAM,CAACU,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQ,CAACtC,iBAAD,GACK,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE4B,MAAM,CAACC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,oBAAC,iBAAD;AAAmB,IAAA,IAAI,EAAC,OAAxB;AAAgC,IAAA,KAAK,EAAC,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADL,GAIIjB,eAAe,IAAIA,eAAe,CAACqB,GAAhB,CAAoB,UAACM,OAAD,EAAUJ,KAAV;AAAA,WAAoB,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAEZ,WAAhB;AAA6B,MAAA,GAAG,EAAEY,KAAlC;AAAyC,MAAA,OAAO,EAAEI,OAAlD;AAA2D,MAAA,IAAI,EAAC,KAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApB;AAAA,GAApB,CAN/B,CAtBJ,EAiCI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEX,MAAM,CAACY,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEC,MAAAA,MAAM,EAAE,EAAV;AAAc/C,MAAAA,KAAK,EAAEH;AAArB,KAAd;AAA4C,IAAA,MAAM,EAAEmD,OAAO,yBAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAjCJ,EAoCI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEd,MAAM,CAACU,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQ3B,UAAU,IAAIA,UAAU,CAACsB,GAAX,CAAe,UAACM,OAAD,EAAUJ,KAAV;AAAA,WAAoB,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAEZ,WAAhB;AAA6B,MAAA,GAAG,EAAEY,KAAlC;AAAyC,MAAA,OAAO,EAAEI,OAAlD;AAA2D,MAAA,IAAI,EAAC,KAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApB;AAAA,GAAf,CAFtB,CApCJ,EA2CI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEX,MAAM,CAACY,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEC,MAAAA,MAAM,EAAE,EAAV;AAAc/C,MAAAA,KAAK,EAAEH;AAArB,KAAd;AAA4C,IAAA,MAAM,EAAEmD,OAAO,4BAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CA3CJ,EA8CI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEd,MAAM,CAACU,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQ5B,UAAU,IAAIA,UAAU,CAACuB,GAAX,CAAe,UAACM,OAAD,EAAUJ,KAAV;AAAA,WAAoB,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAEZ,WAAhB;AAA6B,MAAA,GAAG,EAAEY,KAAlC;AAAyC,MAAA,OAAO,EAAEI,OAAlD;AAA2D,MAAA,IAAI,EAAC,KAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApB;AAAA,GAAf,CAFtB,CA9CJ,CAVhB,CADJ;AAmEH;AAED,IAAMX,MAAM,GAAGe,UAAU,CAACC,MAAX,CAAkB;AAC7Bf,EAAAA,SAAS,EAAE;AACPgB,IAAAA,IAAI,EAAE,CADC;AAEPC,IAAAA,eAAe,EAAE;AAFV,GADkB;AAK7BN,EAAAA,gBAAgB,EAAE;AACdK,IAAAA,IAAI,EAAE,CADQ;AAEdd,IAAAA,YAAY,EAAE,EAFA;AAGdD,IAAAA,SAAS,EAAE;AAHG,GALW;AAU7BiB,EAAAA,aAAa,EAAE;AACXC,IAAAA,SAAS,EAAE,QADA;AAEXC,IAAAA,OAAO,EAAE,EAFE;AAGXC,IAAAA,KAAK,EAAE,SAHI;AAIXC,IAAAA,UAAU,EAAE,MAJD;AAKXC,IAAAA,QAAQ,EAAE,EALC;AAMXN,IAAAA,eAAe,EAAE;AANN,GAVc;AAkB7BR,EAAAA,WAAW,EAAE;AACTe,IAAAA,OAAO,EAAE,MADA;AAETrB,IAAAA,aAAa,EAAE,KAFN;AAGTsB,IAAAA,QAAQ,EAAE,MAHD;AAITC,IAAAA,cAAc,EAAE;AAJP;AAlBgB,CAAlB,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { View, StyleSheet, Dimensions, Image, SafeAreaView, ScrollView, ActivityIndicator } from 'react-native';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { get } from 'styled-system';\r\nimport Category from '../components/Category';\r\nimport HeaderBar from '../components/HeaderBar';\r\nimport { State, getProductsHot, getProductsNew, getProductsCategory, getSlider } from '../redux';\r\nimport { getCategory } from '../redux/actions/categoryActions';\r\nimport { getUserInfo } from '../redux/actions/userActions';\r\nimport Carousel from './../components/Carousel';\r\nimport Product from './../components/Product';\r\nimport { useNavigation } from './../utils/useNavigation';\r\n\r\nconst WIDTH = Dimensions.get('window').width;\r\n\r\nexport default function Home() {\r\n    const [catergoryIndex, setCategoryIndex] = useState<number>(0);\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [isLoadingCategory, setIsLoadingCategory] = useState<boolean>(true);\r\n    const productState = useSelector((state: State) => state.productReducer);\r\n    const sliderState = useSelector((state: State) => state.sliderReducer);\r\n    const categoryState = useSelector((state: State) => state.categoryReducer);\r\n    const { categories } = categoryState;\r\n    const { productHot, productNew, productCategory } = productState;\r\n    const { slider } = sliderState;\r\n    const [_slider, _setSlider] = useState<string[]>([]);\r\n    const dispatch = useDispatch();\r\n    const { navigate } = useNavigation();\r\n\r\n    useEffect(() => {\r\n        dispatch(getProductsNew());\r\n        dispatch(getProductsHot());\r\n        dispatch(getCategory());\r\n        dispatch(getSlider());\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n \r\n        if (productHot && productNew && productCategory && slider && isLoadingCategory) {\r\n            let tempArr: any[] = [];\r\n            for (const iterator of slider!) {\r\n                tempArr.push(iterator.slider_image)\r\n            }\r\n            _setSlider(tempArr);\r\n            setIsLoading(true);\r\n        }\r\n        if (!isLoadingCategory) {\r\n            setIsLoadingCategory(true);\r\n        }\r\n    }, [productState, sliderState])\r\n\r\n    useEffect(() => {\r\n        if (categories && !productCategory) {\r\n            dispatch(getProductsCategory(categories![0].category_id!));\r\n        }\r\n    }, [categoryState])\r\n\r\n    //Chuyen man hinh\r\n    const onTapDetail = (id: number) => {\r\n        navigate('ProductDetail', { id })\r\n    }\r\n\r\n    const searchProduct = (data: any) => {\r\n        navigate('Search', { data: data, title: 'Tìm kiếm' })\r\n    }\r\n\r\n    return (\r\n        <SafeAreaView style={styles.container}>\r\n            {/* Header */}\r\n            <View style={{ marginTop: 40,marginBottom:20 }}>\r\n                <HeaderBar onSearch={searchProduct} />\r\n            </View>\r\n            {\r\n                !isLoading ?\r\n                    (<View style={styles.container}>\r\n                        <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n                    </View>) : (\r\n                        <ScrollView showsVerticalScrollIndicator={false} >\r\n                            {/* Slider */}\r\n                            <View >\r\n                                {_slider && <Carousel images={_slider} auto={true} />}\r\n                            </View>\r\n                            {/* Category */}\r\n                            <View style={{ flexDirection: 'row', marginBottom: 20 }}>\r\n                                {\r\n\r\n                                    categories && categories.map((item, index) =>\r\n                                        <View key={index} style={{ marginLeft: 20 }}>\r\n                                            <Category item={item} index={index} catergoryIndex={catergoryIndex} onTap={() => {\r\n                                                setIsLoadingCategory(false);\r\n                                                const id: number = Number(item.category_id);\r\n                                                dispatch(getProductsCategory(id));\r\n                                                setCategoryIndex(index);\r\n                                            }} />\r\n                                        </View>\r\n                                    )\r\n                                }\r\n\r\n                            </View>\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    !isLoadingCategory ?\r\n                                        (<View style={styles.container}>\r\n                                            <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n                                        </View>) :\r\n                                        productCategory && productCategory.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} type=\"NEW\" />)\r\n\r\n                                }\r\n                            </View>\r\n                            {/* San pham moi nhat */}\r\n                            <View style={styles.productContainer}>\r\n                                <Image style={{ height: 70, width: WIDTH }} source={require('../images/sanpnew.png')} />\r\n                            </View>\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    productNew && productNew.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} type=\"HOT\" />)\r\n                                }\r\n                            </View>\r\n\r\n                            {/* San pham moi nhat */}\r\n                            <View style={styles.productContainer}>\r\n                                <Image style={{ height: 70, width: WIDTH }} source={require('../images/sanpnoibat.png')} />\r\n                            </View>\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    productHot && productHot.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} type=\"NEW\" />)\r\n                                }\r\n                            </View>\r\n\r\n                        </ScrollView>)\r\n            }\r\n        </SafeAreaView>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#E5E5E5',\r\n    },\r\n    productContainer: {\r\n        flex: 1,\r\n        marginBottom: 20,\r\n        marginTop: 10\r\n    },\r\n    productsTitle: {\r\n        textAlign: 'center',\r\n        padding: 10,\r\n        color: '#fff7f7',\r\n        fontWeight: 'bold',\r\n        fontSize: 20,\r\n        backgroundColor: '#FF00FF'\r\n    },\r\n    productList: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-around'\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}