{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nvar _jsxFileName = \"C:\\\\Users\\\\natsw\\\\Desktop\\\\Mobile\\\\CDTN-2\\\\src\\\\screens\\\\Home.tsx\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Category from \"../components/Category\";\nimport HeaderBar from \"../components/HeaderBar\";\nimport { cansa } from \"../consts/Selector\";\nimport Carousel from \"./../components/Carousel\";\nimport Product from \"./../components/Product\";\nimport { useNavigation } from \"./../utils/useNavigation\";\nvar WIDTH = Dimensions.get('window').width;\n\nvar _Home = function _Home() {\n  _classCallCheck(this, _Home);\n\n  this.id = 0;\n  this.productsNew = [];\n  this.productsHot = [];\n  this.productsCategory = [];\n  this.categories = [];\n  this.slide = [];\n};\n\nexport default function Home() {\n  var _this = this;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      catergoryIndex = _useState2[0],\n      setCategoryIndex = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoadingCategory = _useState6[0],\n      setIsLoadingCategory = _useState6[1];\n\n  var _useNavigation = useNavigation(),\n      navigate = _useNavigation.navigate;\n\n  var _useState7 = useState(new _Home()),\n      _useState8 = _slicedToArray(_useState7, 2),\n      _home = _useState8[0],\n      setHome = _useState8[1];\n\n  useEffect(function () {\n    getProductsNew();\n  }, []);\n\n  var getProductCategory = function getProductCategory() {\n    var index,\n        link,\n        _args = arguments;\n    return _regeneratorRuntime.async(function getProductCategory$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            index = _args.length > 0 && _args[0] !== undefined ? _args[0] : 0;\n            link = cansa[1] + \"/api/category/page/1/\" + _home.id + \"/0/e4611a028c71342a5b083d2cbf59c494\";\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios.get(link).then(function (response) {\n              var data = response.data.data;\n              _home.productsCategory = data;\n              setHome(_home);\n              setCategoryIndex(index);\n              setIsLoading(true);\n              setIsLoadingCategory(true);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getProductsNew = function getProductsNew() {\n    var link;\n    return _regeneratorRuntime.async(function getProductsNew$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            link = cansa[1] + \"/api/product/page/1/new/0/e4611a028c71342a5b083d2cbf59c494\";\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(axios.get(link).then(function (response) {\n              var data = response.data.data;\n              _home.productsNew = data;\n              getProductsHot();\n            }));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getProductsHot = function getProductsHot() {\n    var link;\n    return _regeneratorRuntime.async(function getProductsHot$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            link = cansa[1] + \"/api/product/page/1/hot/0/e4611a028c71342a5b083d2cbf59c494\";\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(axios.get(link).then(function (response) {\n              var data = response.data.data;\n              _home.productsHot = data;\n              getCategory();\n            }));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getCategory = function getCategory() {\n    return _regeneratorRuntime.async(function getCategory$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(axios.get(cansa[1] + \"/api/category/all/0/e4611a028c71342a5b083d2cbf59c494\").then(function (response) {\n              var data = response.data.data;\n              _home.categories = data;\n              _home.id = Number(data[0].category_id);\n              getSliders();\n            }));\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getSliders = function getSliders() {\n    return _regeneratorRuntime.async(function getSliders$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(axios.get(cansa[0] + \"/api/slider/all/e4611a028c71342a5b083d2cbf59c494\").then(function (response) {\n              var data = response.data.data;\n              var tempArr = [];\n\n              for (var _iterator = _createForOfIteratorHelperLoose(data), _step; !(_step = _iterator()).done;) {\n                var iterator = _step.value;\n                tempArr.push(iterator.slider_image);\n              }\n\n              _home.slide = tempArr;\n              getProductCategory();\n            }));\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onTapDetail = function onTapDetail(id) {\n    navigate('ProductDetail', {\n      id: id\n    });\n  };\n\n  var searchProduct = function searchProduct(data) {\n    navigate('Search', {\n      data: data\n    });\n  };\n\n  var onTapCategory = function onTapCategory(item, index) {\n    _home.id = item.category_id;\n    setHome(_home);\n    setIsLoadingCategory(false);\n    getProductCategory(index);\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, React.createElement(HeaderBar, {\n    onSearch: searchProduct,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  })), !isLoading ? React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 22\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#00ff00\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  })) : React.createElement(ScrollView, {\n    showsVerticalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, React.createElement(Carousel, {\n    images: _home.slide,\n    auto: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 33\n    }\n  })), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, _home.categories.map(function (item, index) {\n    return React.createElement(View, {\n      key: index,\n      style: {\n        marginLeft: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 41\n      }\n    }, React.createElement(Category, {\n      item: item,\n      index: index,\n      catergoryIndex: catergoryIndex,\n      onTap: function onTap() {\n        _home.id = item.category_id;\n        setHome(_home);\n        setIsLoadingCategory(false);\n        getProductCategory(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 45\n      }\n    }));\n  })), React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, isLoadingCategory ? _home.productsCategory && _home.productsCategory.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      type: \"HOT\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 114\n      }\n    });\n  }) : React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 42\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#00ff00\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 45\n    }\n  }))), React.createElement(View, {\n    style: styles.productContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, React.createElement(Image, {\n    style: {\n      height: 70,\n      width: WIDTH\n    },\n    source: require(\"../images/sanpnew.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  })), React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, _home.productsHot.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      type: \"HOT\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 79\n      }\n    });\n  })), React.createElement(View, {\n    style: styles.productContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, React.createElement(Image, {\n    style: {\n      height: 70,\n      width: WIDTH\n    },\n    source: require(\"../images/sanpnoibat.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  })), React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, _home.productsNew.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      type: \"NEW\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 79\n      }\n    });\n  }))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#E5E5E5'\n  },\n  productContainer: {\n    flex: 1,\n    marginBottom: 20,\n    marginTop: 10\n  },\n  productsTitle: {\n    textAlign: 'center',\n    padding: 10,\n    color: '#fff7f7',\n    fontWeight: 'bold',\n    fontSize: 20,\n    backgroundColor: '#FF00FF'\n  },\n  productList: {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around'\n  }\n});","map":{"version":3,"sources":["C:/Users/natsw/Desktop/Mobile/CDTN-2/src/screens/Home.tsx"],"names":["axios","React","useState","useEffect","Category","HeaderBar","cansa","Carousel","Product","useNavigation","WIDTH","Dimensions","get","width","_Home","id","productsNew","productsHot","productsCategory","categories","slide","Home","catergoryIndex","setCategoryIndex","isLoading","setIsLoading","isLoadingCategory","setIsLoadingCategory","navigate","_home","setHome","getProductsNew","getProductCategory","index","link","then","response","data","getProductsHot","getCategory","Number","category_id","getSliders","tempArr","iterator","push","slider_image","onTapDetail","searchProduct","onTapCategory","item","styles","container","marginTop","flexDirection","marginBottom","map","marginLeft","productList","product","productContainer","height","require","StyleSheet","create","flex","backgroundColor","productsTitle","textAlign","padding","color","fontWeight","fontSize","display","flexWrap","justifyContent"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useState, useEffect } from 'react'\r\nimport { View, StyleSheet, Dimensions, Image, SafeAreaView, ScrollView, ActivityIndicator } from 'react-native';\r\nimport Category from '../components/Category';\r\nimport HeaderBar from '../components/HeaderBar';\r\nimport { cansa } from '../consts/Selector';\r\nimport { ProductModel,CategoryModel } from '../redux';\r\nimport Carousel from './../components/Carousel';\r\nimport Product from './../components/Product';\r\nimport { useNavigation } from './../utils/useNavigation';\r\n\r\nconst WIDTH = Dimensions.get('window').width;\r\n\r\nclass _Home {\r\n    public id: number = 0;\r\n    public productsNew: ProductModel[] = [];\r\n    public productsHot: ProductModel[] = [];\r\n    public productsCategory: ProductModel[] = [];\r\n    public categories: CategoryModel[] = [];\r\n    public slide: any[] = [];\r\n    constructor() { }\r\n}\r\n\r\nexport default function Home() {\r\n    const [catergoryIndex, setCategoryIndex] = useState<number>(0);\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [isLoadingCategory, setIsLoadingCategory] = useState<boolean>(true);\r\n    const { navigate } = useNavigation();\r\n    let [_home, setHome] = useState<_Home>(new _Home());\r\n\r\n    useEffect(() => {\r\n        getProductsNew();\r\n    }, []);\r\n\r\n    const getProductCategory = async (index: number = 0) => {\r\n        let link = `${cansa[1]}/api/category/page/1/${_home.id}/0/e4611a028c71342a5b083d2cbf59c494`;\r\n        await axios.get(link).then((response) => {\r\n            const { data } = response.data;\r\n            _home.productsCategory = data;\r\n            setHome(_home);\r\n            setCategoryIndex(index);\r\n            setIsLoading(true);\r\n            setIsLoadingCategory(true);\r\n        });\r\n    };\r\n\r\n    const getProductsNew = async () => {\r\n        let link = `${cansa[1]}/api/product/page/1/new/0/e4611a028c71342a5b083d2cbf59c494`;\r\n        await axios.get(link).then((response) => {\r\n            const { data } = response.data;\r\n            // setProductsNew(data);\r\n            _home.productsNew = data;\r\n            getProductsHot();\r\n        });\r\n    };\r\n\r\n    const getProductsHot = async () => {\r\n        let link = `${cansa[1]}/api/product/page/1/hot/0/e4611a028c71342a5b083d2cbf59c494`;\r\n        await axios.get(link).then((response) => {\r\n            const { data } = response.data;\r\n            _home.productsHot = data;\r\n            getCategory();\r\n        });\r\n    };\r\n\r\n    const getCategory = async () => {\r\n        await axios.get(`${cansa[1]}/api/category/all/0/e4611a028c71342a5b083d2cbf59c494`).then((response) => {\r\n            const { data } = response.data;\r\n            _home.categories = data;\r\n            _home.id = Number(data[0].category_id);\r\n            getSliders();\r\n        });\r\n    };\r\n\r\n    const getSliders = async () => {\r\n        await axios.get(`${cansa[0]}/api/slider/all/e4611a028c71342a5b083d2cbf59c494`).then((response) => {\r\n            const { data } = response.data;\r\n            let tempArr: any[] = [];\r\n            for (const iterator of data) {\r\n                tempArr.push(iterator.slider_image)\r\n            }\r\n            _home.slide = tempArr;\r\n            getProductCategory();\r\n        });\r\n    };\r\n\r\n    //Chuyen man hinh\r\n    const onTapDetail = (id: number) => {\r\n        navigate('ProductDetail', { id })\r\n    }\r\n\r\n    const searchProduct = (data: any) => {\r\n        navigate('Search', { data })\r\n    }\r\n\r\n    const onTapCategory = (item: any,index: number) => {\r\n            _home.id = item.category_id;\r\n            setHome(_home);\r\n            setIsLoadingCategory(false);\r\n            getProductCategory(index);\r\n    }\r\n    return (\r\n        <SafeAreaView style={styles.container}>\r\n            {/* Header */}\r\n            <View style={{ marginTop: 40 }}>\r\n                <HeaderBar onSearch={searchProduct} />\r\n            </View>\r\n            {\r\n                !isLoading ?\r\n                    (<View style={styles.container}>\r\n                        <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n                    </View>) : (\r\n                        <ScrollView showsVerticalScrollIndicator={false} >\r\n                            {/* Slider */}\r\n                            <View style={{ marginTop: 20 }}>\r\n                                <Carousel images={_home.slide} auto={true} />\r\n                            </View>\r\n                            {/* Category */}\r\n                            <View style={{ flexDirection: 'row', marginBottom: 20 }}>\r\n                                {\r\n\r\n                                    _home.categories.map((item, index) =>\r\n                                        <View key={index} style={{ marginLeft: 20 }}>\r\n                                            <Category item={item} index={index} catergoryIndex={catergoryIndex} onTap={() => {\r\n                                                _home.id = item.category_id;\r\n                                                setHome(_home);\r\n                                                setIsLoadingCategory(false);\r\n                                                getProductCategory(index);\r\n                                            }} />\r\n                                        </View>\r\n                                    )\r\n                                }\r\n\r\n                            </View>\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    isLoadingCategory ?\r\n                                        _home.productsCategory && _home.productsCategory.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} type=\"HOT\" />)\r\n                                        :\r\n                                        (<View style={styles.container}>\r\n                                            <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n                                        </View>)\r\n                                }\r\n                            </View>\r\n                            {/* San pham moi nhat */}\r\n                            <View style={styles.productContainer}>\r\n                                <Image style={{ height: 70, width: WIDTH }} source={require('../images/sanpnew.png')} />\r\n                            </View>\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    _home.productsHot.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} type=\"HOT\" />)\r\n                                }\r\n                            </View>\r\n\r\n                            {/* San pham moi nhat */}\r\n                            <View style={styles.productContainer}>\r\n                                <Image style={{ height: 70, width: WIDTH }} source={require('../images/sanpnoibat.png')} />\r\n                            </View>\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    _home.productsNew.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} type=\"NEW\" />)\r\n                                }\r\n                            </View>\r\n\r\n                        </ScrollView>)\r\n            }\r\n        </SafeAreaView>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#E5E5E5',\r\n    },\r\n    productContainer: {\r\n        flex: 1,\r\n        marginBottom: 20,\r\n        marginTop: 10\r\n    },\r\n    productsTitle: {\r\n        textAlign: 'center',\r\n        padding: 10,\r\n        color: '#fff7f7',\r\n        fontWeight: 'bold',\r\n        fontSize: 20,\r\n        backgroundColor: '#FF00FF'\r\n    },\r\n    productList: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-around'\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}