{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"E:\\\\React_mobile_brand\\\\CDTN-2\\\\src\\\\screens\\\\Search.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SearchBarTop from \"../components/SearchBarTop\";\nimport RNPickerSelect from 'react-native-picker-select';\nimport COLORS from \"../consts/Colors\";\nimport Product from \"../components/Product\";\nimport { useNavigation } from \"../utils/useNavigation\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProductsCategory, getProductsSearch, ProductModel } from \"../redux\";\nimport { ScrollView } from 'react-native-gesture-handler';\nimport MaterialIcons from \"@expo/vector-icons/MaterialIcons\";\nexport default function Search(props) {\n  var _this = this;\n\n  var productState = useSelector(function (state) {\n    return state.productReducer;\n  });\n  var dispatch = useDispatch();\n  var productSearch = productState.productSearch,\n      productCategory = productState.productCategory;\n  var navigation = props.navigation,\n      route = props.route;\n  var getParam = navigation.getParam,\n      goBack = navigation.goBack;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoadmore = _useState4[0],\n      setIsLoadmore = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      page = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useState7 = useState([new ProductModel()]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      products = _useState8[0],\n      setProducts = _useState8[1];\n\n  var _useState9 = useState(getParam('title')),\n      _useState10 = _slicedToArray(_useState9, 2),\n      title = _useState10[0],\n      setTitle = _useState10[1];\n\n  var _useState11 = useState(getParam('data')),\n      _useState12 = _slicedToArray(_useState11, 2),\n      data = _useState12[0],\n      setData = _useState12[1];\n\n  var _useNavigation = useNavigation(),\n      navigate = _useNavigation.navigate;\n\n  var onTapDetail = function onTapDetail(id) {\n    navigate('ProductDetail', {\n      id: id\n    });\n  };\n\n  var filterPrice = function filterPrice(data) {\n    if (productSearch || productCategory) {\n      var arr = [];\n\n      switch (data) {\n        case 1:\n          if (productSearch) {\n            arr = productSearch.filter(function (product) {\n              return product.product_price * (100 - product.product_sale) / 100 <= 999999;\n            });\n          } else {\n            arr = productCategory.filter(function (product) {\n              return product.product_price * (100 - product.product_sale) / 100 <= 999999;\n            });\n          }\n\n          setProducts(arr);\n          break;\n\n        case 2:\n          if (productSearch) {\n            arr = productSearch.filter(function (product) {\n              return product.product_price * (100 - product.product_sale) / 100 >= 1000000 && product.product_price * (100 - product.product_sale) / 100 <= 9999999;\n            });\n          } else {\n            arr = productCategory.filter(function (product) {\n              return product.product_price * (100 - product.product_sale) / 100 >= 1000000 && product.product_price * (100 - product.product_sale) / 100 <= 9999999;\n            });\n          }\n\n          setProducts(arr);\n          break;\n\n        case 3:\n          if (productSearch) {\n            arr = productSearch.filter(function (product) {\n              return product.product_price * (100 - product.product_sale) / 100 >= 10000000;\n            });\n          } else {\n            arr = productCategory.filter(function (product) {\n              return product.product_price * (100 - product.product_sale) / 100 >= 10000000;\n            });\n          }\n\n          setProducts(arr);\n          break;\n\n        default:\n          arr = [];\n          CheckSearchOrCat(title);\n          break;\n      }\n    }\n  };\n\n  var sortName = function sortName(data) {\n    if (products) {\n      var arr;\n\n      switch (data) {\n        case 1:\n          arr = _toConsumableArray(products);\n          arr.sort(function (a, b) {\n            return a.product_title.toUpperCase() !== b.product_title.toUpperCase() ? a.product_title.toUpperCase() < b.product_title.toUpperCase() ? -1 : 1 : 0;\n          });\n          setProducts(arr);\n          break;\n\n        case 2:\n          arr = _toConsumableArray(products);\n          arr.sort(function (a, b) {\n            return a.product_title.toUpperCase() !== b.product_title.toUpperCase() ? a.product_title.toUpperCase() > b.product_title.toUpperCase() ? -1 : 1 : 0;\n          });\n          setProducts(arr);\n          break;\n\n        default:\n          arr = _toConsumableArray(products);\n          setProducts(arr);\n          break;\n      }\n    }\n  };\n\n  function CheckSearchOrCat(title) {\n    switch (title) {\n      case 'Tìm kiếm':\n        if (productSearch) {\n          setProducts(productSearch);\n          setIsLoading(true);\n        } else {\n          setProducts([]);\n          setIsLoading(true);\n        }\n\n        break;\n\n      default:\n        if (productCategory) {\n          setProducts(productCategory);\n          setIsLoading(true);\n        } else {\n          setProducts([]);\n          setIsLoading(true);\n        }\n\n        break;\n    }\n  }\n\n  useEffect(function () {\n    CheckSearchOrCat(title);\n  }, []);\n  useEffect(function () {\n    switch (title) {\n      case 'Tìm kiếm':\n        if (productSearch) {\n          setProducts(productSearch);\n          setIsLoading(true);\n        } else {\n          setProducts([]);\n          setIsLoading(true);\n        }\n\n        break;\n\n      default:\n        if (productCategory) {\n          setProducts(productCategory);\n          setIsLoading(true);\n        } else {\n          setProducts([]);\n          setIsLoading(true);\n        }\n\n        break;\n    }\n  }, [productState]);\n  useEffect(function () {\n    switch (title) {\n      case 'Tìm kiếm':\n        dispatch(getProductsSearch(data, page));\n        break;\n\n      default:\n        dispatch(getProductsCategory(data, page));\n        break;\n    }\n  }, [page]);\n\n  var searchProduct = function searchProduct(data) {\n    navigate('Search', {\n      data: data\n    });\n  };\n\n  var isCloseToBottom = function isCloseToBottom(_ref) {\n    var layoutMeasurement = _ref.layoutMeasurement,\n        contentOffset = _ref.contentOffset,\n        contentSize = _ref.contentSize;\n    var paddingToBottom = 20;\n    return layoutMeasurement.height + contentOffset.y >= contentSize.height - paddingToBottom;\n  };\n\n  return !isLoading ? React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 14\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#00ff00\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  })) : React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: styles.searchContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, React.createElement(SearchBarTop, {\n    onSearch: searchProduct,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  })), React.createElement(View, {\n    style: {\n      flex: 1,\n      marginTop: 30,\n      backgroundColor: '#E5E5E5'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, React.createElement(View, {\n    style: {\n      paddingVertical: 10,\n      backgroundColor: '#ffffff',\n      marginBottom: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: 'center',\n      fontSize: 18,\n      color: '#222'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, title), React.createElement(View, {\n    style: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, React.createElement(TouchableOpacity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 33\n    }\n  }, React.createElement(MaterialIcons, {\n    style: styles.headerIcon,\n    name: \"arrow-back\",\n    size: 25,\n    color: \"white\",\n    onPress: function onPress() {\n      return navigation.goBack();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 37\n    }\n  })))), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      padding: 10,\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      borderRadius: 50,\n      paddingRight: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 29\n    }\n  }, React.createElement(View, {\n    style: {\n      borderWidth: 1,\n      borderColor: '#888'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  }, React.createElement(RNPickerSelect, {\n    placeholder: {\n      label: \"Filter\",\n      value: 0\n    },\n    style: _objectSpread(_objectSpread({}, pickerSelectStyles), {}, {\n      placeholder: {\n        color: '#555'\n      }\n    }),\n    onValueChange: function onValueChange(data) {\n      return filterPrice(data);\n    },\n    items: [{\n      label: '< 1.000.000đ',\n      value: 1\n    }, {\n      label: '1.000.000 - 10.000.000đ',\n      value: 2\n    }, {\n      label: '> 10.000.000đ',\n      value: 3\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 37\n    }\n  }))), React.createElement(View, {\n    style: {\n      flex: 1,\n      paddingLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 29\n    }\n  }, React.createElement(View, {\n    style: {\n      borderWidth: 1,\n      borderColor: '#888'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 33\n    }\n  }, React.createElement(RNPickerSelect, {\n    placeholder: {\n      label: \"Sort\",\n      value: 0\n    },\n    style: _objectSpread(_objectSpread({}, pickerSelectStyles), {}, {\n      placeholder: {\n        color: '#555'\n      }\n    }),\n    onValueChange: function onValueChange(data) {\n      return sortName(data);\n    },\n    items: [{\n      label: 'A - Z',\n      value: 1\n    }, {\n      label: 'Z - A',\n      value: 2\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 37\n    }\n  })))), React.createElement(ScrollView, {\n    onScroll: function onScroll(_ref2) {\n      var nativeEvent = _ref2.nativeEvent;\n\n      if (isCloseToBottom(nativeEvent)) {\n        setPage(page + 1);\n      }\n    },\n    scrollEventThrottle: 400,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    style: styles.productList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 29\n    }\n  }, products.length > 0 ? products.map(function (product, index) {\n    return React.createElement(Product, {\n      onTap: onTapDetail,\n      key: index,\n      product: product,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 92\n      }\n    });\n  }) : React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 37\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20,\n      color: '#222'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 41\n    }\n  }, \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m\"))))));\n}\nvar styles = StyleSheet.create({\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    padding: 5,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 2\n  },\n  headerIcon: {\n    backgroundColor: 'rgba(0, 0, 0, 0.6)',\n    borderRadius: 50,\n    padding: 5\n  },\n  container: {\n    flex: 1,\n    backgroundColor: COLORS.primary\n  },\n  searchContainer: {\n    marginTop: 30\n  },\n  productList: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    flexWrap: 'wrap'\n  }\n});\nvar pickerSelectStyles = StyleSheet.create({\n  inputIOS: {\n    fontSize: 20,\n    borderRadius: 30,\n    color: 'black',\n    padding: 20\n  },\n  inputAndroid: {\n    fontSize: 20,\n    borderRadius: 30,\n    color: 'black',\n    padding: 20\n  }\n});","map":{"version":3,"sources":["E:/React_mobile_brand/CDTN-2/src/screens/Search.tsx"],"names":["React","useState","useEffect","SearchBarTop","RNPickerSelect","COLORS","Product","useNavigation","useDispatch","useSelector","getProductsCategory","getProductsSearch","ProductModel","ScrollView","MaterialIcons","Search","props","productState","state","productReducer","dispatch","productSearch","productCategory","navigation","route","getParam","goBack","isLoading","setIsLoading","isLoadmore","setIsLoadmore","page","setPage","products","setProducts","title","setTitle","data","setData","navigate","onTapDetail","id","filterPrice","arr","filter","product","product_price","product_sale","CheckSearchOrCat","sortName","sort","a","b","product_title","toUpperCase","searchProduct","isCloseToBottom","layoutMeasurement","contentOffset","contentSize","paddingToBottom","height","y","styles","container","searchContainer","flex","marginTop","backgroundColor","paddingVertical","marginBottom","textAlign","fontSize","color","header","headerIcon","flexDirection","padding","borderRadius","paddingRight","borderWidth","borderColor","label","value","pickerSelectStyles","placeholder","paddingLeft","nativeEvent","productList","length","map","index","justifyContent","alignItems","StyleSheet","create","position","top","left","right","zIndex","primary","display","flexWrap","inputIOS","inputAndroid"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;AAEA,OAAOC,YAAP;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,MAAP;AACA,OAAOC,OAAP;AACA,SAASC,aAAT;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,mBAAT,EAA8BC,iBAA9B,EAAiDC,YAAjD;AACA,SAASC,UAAT,QAA2B,8BAA3B;AACA,OAAQC,aAAR;AAEA,eAAe,SAASC,MAAT,CAAgBC,KAAhB,EAA4B;AAAA;;AACvC,MAAMC,YAAY,GAAGR,WAAW,CAAC,UAACS,KAAD;AAAA,WAAkBA,KAAK,CAACC,cAAxB;AAAA,GAAD,CAAhC;AACA,MAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,MAAQa,aAAR,GAA2CJ,YAA3C,CAAQI,aAAR;AAAA,MAAuBC,eAAvB,GAA2CL,YAA3C,CAAuBK,eAAvB;AACA,MAAQC,UAAR,GAA8BP,KAA9B,CAAQO,UAAR;AAAA,MAAoBC,KAApB,GAA8BR,KAA9B,CAAoBQ,KAApB;AACA,MAAQC,QAAR,GAA6BF,UAA7B,CAAQE,QAAR;AAAA,MAAkBC,MAAlB,GAA6BH,UAA7B,CAAkBG,MAAlB;;AACA,kBAAkCzB,QAAQ,CAAU,KAAV,CAA1C;AAAA;AAAA,MAAO0B,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAAoC3B,QAAQ,CAAU,KAAV,CAA5C;AAAA;AAAA,MAAO4B,UAAP;AAAA,MAAmBC,aAAnB;;AACA,mBAAwB7B,QAAQ,CAAS,CAAT,CAAhC;AAAA;AAAA,MAAO8B,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAgC/B,QAAQ,CAAM,CAAC,IAAIW,YAAJ,EAAD,CAAN,CAAxC;AAAA;AAAA,MAAOqB,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAA0BjC,QAAQ,CAASwB,QAAQ,CAAC,OAAD,CAAjB,CAAlC;AAAA;AAAA,MAAOU,KAAP;AAAA,MAAcC,QAAd;;AACA,oBAAwBnC,QAAQ,CAAMwB,QAAQ,CAAC,MAAD,CAAd,CAAhC;AAAA;AAAA,MAAOY,IAAP;AAAA,MAAaC,OAAb;;AACA,uBAAqB/B,aAAa,EAAlC;AAAA,MAAQgC,QAAR,kBAAQA,QAAR;;AACA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,EAAD,EAAgB;AAChCF,IAAAA,QAAQ,CAAC,eAAD,EAAkB;AAAEE,MAAAA,EAAE,EAAFA;AAAF,KAAlB,CAAR;AACH,GAFD;;AAIA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACL,IAAD,EAAgB;AAChC,QAAIhB,aAAa,IAAIC,eAArB,EAAsC;AAClC,UAAIqB,GAAG,GAAG,EAAV;;AACA,cAAQN,IAAR;AACI,aAAK,CAAL;AACI,cAAIhB,aAAJ,EAAmB;AACfsB,YAAAA,GAAG,GAAGtB,aAAa,CAACuB,MAAd,CAAqB,UAACC,OAAD;AAAA,qBAA0BA,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,MAApF;AAAA,aAArB,CAAN;AACH,WAFD,MAGI;AACAJ,YAAAA,GAAG,GAAGrB,eAAe,CAAEsB,MAAjB,CAAwB,UAACC,OAAD;AAAA,qBAA0BA,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,MAApF;AAAA,aAAxB,CAAN;AACH;;AACDb,UAAAA,WAAW,CAACS,GAAD,CAAX;AACA;;AACJ,aAAK,CAAL;AACI,cAAItB,aAAJ,EAAmB;AAChBsB,YAAAA,GAAG,GAAGtB,aAAa,CAACuB,MAAd,CAAqB,UAACC,OAAD;AAAA,qBAA0BA,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,OAA1D,IAAqEF,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,OAAzJ;AAAA,aAArB,CAAN;AACF,WAFD,MAGI;AACDJ,YAAAA,GAAG,GAAGrB,eAAe,CAAEsB,MAAjB,CAAwB,UAACC,OAAD;AAAA,qBAA0BA,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,OAA1D,IAAqEF,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,OAAzJ;AAAA,aAAxB,CAAN;AACF;;AACDb,UAAAA,WAAW,CAACS,GAAD,CAAX;AACA;;AACJ,aAAK,CAAL;AACI,cAAItB,aAAJ,EAAmB;AACfsB,YAAAA,GAAG,GAAGtB,aAAa,CAACuB,MAAd,CAAqB,UAACC,OAAD;AAAA,qBAA0BA,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,QAApF;AAAA,aAArB,CAAN;AACH,WAFD,MAGI;AACAJ,YAAAA,GAAG,GAAGrB,eAAe,CAAEsB,MAAjB,CAAwB,UAACC,OAAD;AAAA,qBAA0BA,OAAO,CAACC,aAAR,IAAwB,MAAID,OAAO,CAACE,YAApC,IAAmD,GAAnD,IAA0D,QAApF;AAAA,aAAxB,CAAN;AACH;;AACDb,UAAAA,WAAW,CAACS,GAAD,CAAX;AACA;;AACJ;AACIA,UAAAA,GAAG,GAAC,EAAJ;AACAK,UAAAA,gBAAgB,CAACb,KAAD,CAAhB;AACJ;AA/BJ;AAiCH;AACJ,GArCD;;AAuCA,MAAMc,QAAQ,GAAG,SAAXA,QAAW,CAACZ,IAAD,EAAe;AAC5B,QAAIJ,QAAJ,EAAc;AACV,UAAIU,GAAJ;;AACA,cAAQN,IAAR;AACI,aAAK,CAAL;AACIM,UAAAA,GAAG,sBAAOV,QAAP,CAAH;AACAU,UAAAA,GAAG,CAACO,IAAJ,CAAS,UAACC,CAAD,EAAiBC,CAAjB;AAAA,mBAAmCD,CAAC,CAACE,aAAF,CAAiBC,WAAjB,OAAmCF,CAAC,CAACC,aAAF,CAAiBC,WAAjB,EAAnC,GAAoEH,CAAC,CAACE,aAAF,CAAiBC,WAAjB,KAAiCF,CAAC,CAACC,aAAF,CAAiBC,WAAjB,EAAjC,GAAkE,CAAC,CAAnE,GAAuE,CAA3I,GAA+I,CAAlL;AAAA,WAAT;AACApB,UAAAA,WAAW,CAACS,GAAD,CAAX;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,GAAG,sBAAOV,QAAP,CAAH;AACAU,UAAAA,GAAG,CAACO,IAAJ,CAAS,UAACC,CAAD,EAAiBC,CAAjB;AAAA,mBAAmCD,CAAC,CAACE,aAAF,CAAiBC,WAAjB,OAAmCF,CAAC,CAACC,aAAF,CAAiBC,WAAjB,EAAnC,GAAoEH,CAAC,CAACE,aAAF,CAAiBC,WAAjB,KAAiCF,CAAC,CAACC,aAAF,CAAiBC,WAAjB,EAAjC,GAAkE,CAAC,CAAnE,GAAuE,CAA3I,GAA+I,CAAlL;AAAA,WAAT;AACApB,UAAAA,WAAW,CAACS,GAAD,CAAX;AACA;;AACJ;AACIA,UAAAA,GAAG,sBAAKV,QAAL,CAAH;AACAC,UAAAA,WAAW,CAACS,GAAD,CAAX;AACJ;AAdJ;AAgBH;AACJ,GApBD;;AAsBA,WAASK,gBAAT,CAA0Bb,KAA1B,EAAwC;AACpC,YAAQA,KAAR;AACI,WAAK,UAAL;AACI,YAAId,aAAJ,EAAmB;AACfa,UAAAA,WAAW,CAACb,aAAD,CAAX;AACAO,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,SAHD,MAII;AACAM,UAAAA,WAAW,CAAC,EAAD,CAAX;AACAN,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AACD;;AACJ;AACI,YAAIN,eAAJ,EAAqB;AACjBY,UAAAA,WAAW,CAACZ,eAAD,CAAX;AACAM,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,SAHD,MAII;AACAM,UAAAA,WAAW,CAAC,EAAD,CAAX;AACAN,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AACD;AApBR;AAsBH;;AAED1B,EAAAA,SAAS,CAAC,YAAM;AACZ8C,IAAAA,gBAAgB,CAACb,KAAD,CAAhB;AACH,GAFQ,EAEN,EAFM,CAAT;AAIAjC,EAAAA,SAAS,CAAC,YAAM;AACZ,YAAQiC,KAAR;AACI,WAAK,UAAL;AACI,YAAId,aAAJ,EAAmB;AACfa,UAAAA,WAAW,CAACb,aAAD,CAAX;AACAO,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,SAHD,MAII;AACAM,UAAAA,WAAW,CAAC,EAAD,CAAX;AACAN,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AACD;;AACJ;AACI,YAAIN,eAAJ,EAAqB;AACjBY,UAAAA,WAAW,CAACZ,eAAD,CAAX;AACAM,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,SAHD,MAII;AACAM,UAAAA,WAAW,CAAC,EAAD,CAAX;AACAN,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AACD;AApBR;AAsBH,GAvBQ,EAuBN,CAACX,YAAD,CAvBM,CAAT;AAyBAf,EAAAA,SAAS,CAAC,YAAM;AACZ,YAAQiC,KAAR;AACI,WAAK,UAAL;AACIf,QAAAA,QAAQ,CAACT,iBAAiB,CAAC0B,IAAD,EAAON,IAAP,CAAlB,CAAR;AACA;;AACJ;AACIX,QAAAA,QAAQ,CAACV,mBAAmB,CAAC2B,IAAD,EAAON,IAAP,CAApB,CAAR;AACA;AANR;AAQH,GATQ,EASN,CAACA,IAAD,CATM,CAAT;;AAWA,MAAMwB,aAAa,GAAG,SAAhBA,aAAgB,CAAClB,IAAD,EAAe;AACjCE,IAAAA,QAAQ,CAAC,QAAD,EAAW;AAAEF,MAAAA,IAAI,EAAJA;AAAF,KAAX,CAAR;AACH,GAFD;;AAIA,MAAMmB,eAAe,GAAG,SAAlBA,eAAkB,OAA4D;AAAA,QAAzDC,iBAAyD,QAAzDA,iBAAyD;AAAA,QAAtCC,aAAsC,QAAtCA,aAAsC;AAAA,QAAvBC,WAAuB,QAAvBA,WAAuB;AAChF,QAAMC,eAAe,GAAG,EAAxB;AACA,WAAOH,iBAAiB,CAACI,MAAlB,GAA2BH,aAAa,CAACI,CAAzC,IACHH,WAAW,CAACE,MAAZ,GAAqBD,eADzB;AAEH,GAJD;;AAMA,SACI,CAACjC,SAAD,GACK,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAEoC,MAAM,CAACC,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,oBAAC,iBAAD;AAAmB,IAAA,IAAI,EAAC,OAAxB;AAAgC,IAAA,KAAK,EAAC,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADL,GAIQ,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAED,MAAM,CAACC,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAED,MAAM,CAACE,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAEV,aAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAFJ,EAMI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEW,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,SAAS,EAAE,EAAtB;AAA0BC,MAAAA,eAAe,EAAE;AAA3C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACC,MAAAA,eAAe,EAAC,EAAjB;AAAoBD,MAAAA,eAAe,EAAC,SAApC;AAA8CE,MAAAA,YAAY,EAAC;AAA3D,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAC,QAAX;AAAoBC,MAAAA,QAAQ,EAAC,EAA7B;AAAgCC,MAAAA,KAAK,EAAC;AAAtC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6DtC,KAA7D,CADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE4B,MAAM,CAACW,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,aAAD;AAAe,IAAA,KAAK,EAAEX,MAAM,CAACY,UAA7B;AAAyC,IAAA,IAAI,EAAC,YAA9C;AAA2D,IAAA,IAAI,EAAE,EAAjE;AAAqE,IAAA,KAAK,EAAC,OAA3E;AAAmF,IAAA,OAAO,EAAE;AAAA,aAAMpD,UAAU,CAACG,MAAX,EAAN;AAAA,KAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CAFJ,CADJ,EASI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEkD,MAAAA,aAAa,EAAE,KAAjB;AAAwBC,MAAAA,OAAO,EAAE,EAAjC;AAAqCP,MAAAA,YAAY,EAAE;AAAnD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEJ,MAAAA,IAAI,EAAE,CAAR;AAAWY,MAAAA,YAAY,EAAE,EAAzB;AAA6BC,MAAAA,YAAY,EAAE;AAA3C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,WAAW,EAAE,CAAf;AAAkBC,MAAAA,WAAW,EAAE;AAA/B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,cAAD;AACI,IAAA,WAAW,EAAE;AAAEC,MAAAA,KAAK,EAAE,QAAT;AAAmBC,MAAAA,KAAK,EAAE;AAA1B,KADjB;AAEI,IAAA,KAAK,kCAAOC,kBAAP;AAA2BC,MAAAA,WAAW,EAAE;AAAEZ,QAAAA,KAAK,EAAE;AAAT;AAAxC,MAFT;AAGI,IAAA,aAAa,EAAE,uBAACpC,IAAD;AAAA,aAAUK,WAAW,CAACL,IAAD,CAArB;AAAA,KAHnB;AAII,IAAA,KAAK,EAAE,CACH;AAAE6C,MAAAA,KAAK,EAAE,cAAT;AAAyBC,MAAAA,KAAK,EAAE;AAAhC,KADG,EAEH;AAAED,MAAAA,KAAK,EAAE,yBAAT;AAAoCC,MAAAA,KAAK,EAAE;AAA3C,KAFG,EAGH;AAAED,MAAAA,KAAK,EAAE,eAAT;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KAHG,CAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ,EAeI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEjB,MAAAA,IAAI,EAAE,CAAR;AAAWoB,MAAAA,WAAW,EAAE;AAAxB,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEN,MAAAA,WAAW,EAAE,CAAf;AAAkBC,MAAAA,WAAW,EAAE;AAA/B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,cAAD;AACI,IAAA,WAAW,EAAE;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,KAAK,EAAE;AAAxB,KADjB;AAEI,IAAA,KAAK,kCAAOC,kBAAP;AAA2BC,MAAAA,WAAW,EAAE;AAAEZ,QAAAA,KAAK,EAAE;AAAT;AAAxC,MAFT;AAGI,IAAA,aAAa,EAAE,uBAACpC,IAAD;AAAA,aAAUY,QAAQ,CAACZ,IAAD,CAAlB;AAAA,KAHnB;AAII,IAAA,KAAK,EAAE,CACH;AAAE6C,MAAAA,KAAK,EAAE,OAAT;AAAkBC,MAAAA,KAAK,EAAE;AAAzB,KADG,EAEH;AAAED,MAAAA,KAAK,EAAE,OAAT;AAAkBC,MAAAA,KAAK,EAAE;AAAzB,KAFG,CAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAFJ,CAfJ,CATJ,EAuCI,oBAAC,UAAD;AACI,IAAA,QAAQ,EAAE,yBAAqB;AAAA,UAAlBI,WAAkB,SAAlBA,WAAkB;;AAC3B,UAAI/B,eAAe,CAAC+B,WAAD,CAAnB,EAAkC;AAC9BvD,QAAAA,OAAO,CAACD,IAAI,GAAG,CAAR,CAAP;AACH;AACJ,KALL;AAMI,IAAA,mBAAmB,EAAE,GANzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEgC,MAAM,CAACyB,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQvD,QAAQ,CAACwD,MAAT,GAAkB,CAAlB,GAAsBxD,QAAQ,CAACyD,GAAT,CAAa,UAAC7C,OAAD,EAAU8C,KAAV;AAAA,WAAoB,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAEnD,WAAhB;AAA6B,MAAA,GAAG,EAAEmD,KAAlC;AAAyC,MAAA,OAAO,EAAE9C,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApB;AAAA,GAAb,CAAtB,GAEA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACqB,MAAAA,IAAI,EAAC,CAAN;AAAQ0B,MAAAA,cAAc,EAAC,QAAvB;AAAgCC,MAAAA,UAAU,EAAC;AAA3C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACrB,MAAAA,QAAQ,EAAC,EAAV;AAAaC,MAAAA,KAAK,EAAC;AAAnB,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCADJ,CAJR,CARJ,CAvCJ,CANJ,CALZ;AAyEH;AAED,IAAMV,MAAM,GAAG+B,UAAU,CAACC,MAAX,CAAkB;AAC7BrB,EAAAA,MAAM,EAAE;AACJE,IAAAA,aAAa,EAAC,KADV;AAEJgB,IAAAA,cAAc,EAAC,eAFX;AAGJf,IAAAA,OAAO,EAAE,CAHL;AAIJmB,IAAAA,QAAQ,EAAE,UAJN;AAKJC,IAAAA,GAAG,EAAE,CALD;AAMJC,IAAAA,IAAI,EAAE,CANF;AAOJC,IAAAA,KAAK,EAAE,CAPH;AAQJC,IAAAA,MAAM,EAAC;AARH,GADqB;AAW7BzB,EAAAA,UAAU,EAAE;AACRP,IAAAA,eAAe,EAAE,oBADT;AAERU,IAAAA,YAAY,EAAE,EAFN;AAGRD,IAAAA,OAAO,EAAE;AAHD,GAXiB;AAgB7Bb,EAAAA,SAAS,EAAE;AACPE,IAAAA,IAAI,EAAE,CADC;AAEPE,IAAAA,eAAe,EAAE/D,MAAM,CAACgG;AAFjB,GAhBkB;AAoB7BpC,EAAAA,eAAe,EAAE;AACbE,IAAAA,SAAS,EAAE;AADE,GApBY;AAwB7BqB,EAAAA,WAAW,EAAE;AACTc,IAAAA,OAAO,EAAE,MADA;AAET1B,IAAAA,aAAa,EAAE,KAFN;AAGTgB,IAAAA,cAAc,EAAC,cAHN;AAITW,IAAAA,QAAQ,EAAC;AAJA;AAxBgB,CAAlB,CAAf;AA+BA,IAAMnB,kBAAkB,GAAGU,UAAU,CAACC,MAAX,CAAkB;AACzCS,EAAAA,QAAQ,EAAE;AACNhC,IAAAA,QAAQ,EAAE,EADJ;AAENM,IAAAA,YAAY,EAAE,EAFR;AAGNL,IAAAA,KAAK,EAAE,OAHD;AAINI,IAAAA,OAAO,EAAE;AAJH,GAD+B;AAQzC4B,EAAAA,YAAY,EAAE;AACVjC,IAAAA,QAAQ,EAAE,EADA;AAEVM,IAAAA,YAAY,EAAE,EAFJ;AAGVL,IAAAA,KAAK,EAAE,OAHG;AAIVI,IAAAA,OAAO,EAAE;AAJC;AAR2B,CAAlB,CAA3B","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { SafeAreaView, View, StyleSheet, FlatList, Text, ActivityIndicator, TouchableOpacity } from 'react-native'\r\nimport SearchBarTop from '../components/SearchBarTop'\r\nimport RNPickerSelect from 'react-native-picker-select';\r\nimport COLORS from '../consts/Colors';\r\nimport Product from '../components/Product';\r\nimport { useNavigation } from '../utils/useNavigation';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getProductsCategory, getProductsSearch, ProductModel, State } from '../redux';\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport  MaterialIcons  from 'react-native-vector-icons/MaterialIcons';\r\n\r\nexport default function Search(props: any) {\r\n    const productState = useSelector((state: State) => state.productReducer);\r\n    const dispatch = useDispatch();\r\n    const { productSearch, productCategory } = productState;\r\n    const { navigation, route } = props;\r\n    const { getParam, goBack } = navigation;\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [isLoadmore, setIsLoadmore] = useState<boolean>(false);\r\n    const [page, setPage] = useState<number>(1);\r\n    const [products, setProducts] = useState<any>([new ProductModel()]);\r\n    const [title, setTitle] = useState<string>(getParam('title'));\r\n    const [data, setData] = useState<any>(getParam('data'));\r\n    const { navigate } = useNavigation();\r\n    const onTapDetail = (id: number) => {\r\n        navigate('ProductDetail', { id })\r\n    }\r\n\r\n    const filterPrice = (data:number) =>{\r\n        if (productSearch || productCategory) {\r\n            let arr = [];\r\n            switch (data) {\r\n                case 1:\r\n                    if (productSearch) {\r\n                        arr = productSearch.filter((product:ProductModel) => product.product_price!*(100-product.product_sale!)/100 <= 999999)\r\n                    }\r\n                    else{\r\n                        arr = productCategory!.filter((product:ProductModel) => product.product_price!*(100-product.product_sale!)/100 <= 999999)\r\n                    }\r\n                    setProducts(arr);\r\n                    break;\r\n                case 2:\r\n                    if (productSearch) {\r\n                       arr = productSearch.filter((product:ProductModel) => product.product_price!*(100-product.product_sale!)/100 >= 1000000 && product.product_price!*(100-product.product_sale!)/100 <= 9999999)\r\n                    }\r\n                    else{\r\n                       arr = productCategory!.filter((product:ProductModel) => product.product_price!*(100-product.product_sale!)/100 >= 1000000 && product.product_price!*(100-product.product_sale!)/100 <= 9999999)\r\n                    }\r\n                    setProducts(arr);\r\n                    break;\r\n                case 3:\r\n                    if (productSearch) {\r\n                        arr = productSearch.filter((product:ProductModel) => product.product_price!*(100-product.product_sale!)/100 >= 10000000)\r\n                    }\r\n                    else{\r\n                        arr = productCategory!.filter((product:ProductModel) => product.product_price!*(100-product.product_sale!)/100 >= 10000000)\r\n                    }\r\n                    setProducts(arr);\r\n                    break;\r\n                default:\r\n                    arr=[]\r\n                    CheckSearchOrCat(title)\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    const sortName = (data:number)=>{\r\n        if (products) {\r\n            let arr;\r\n            switch (data) {\r\n                case 1:\r\n                    arr = [...products];\r\n                    arr.sort((a:ProductModel, b:ProductModel)=> a.product_title!.toUpperCase() !== b.product_title!.toUpperCase() ? a.product_title!.toUpperCase() < b.product_title!.toUpperCase() ? -1 : 1 : 0 );  \r\n                    setProducts(arr);\r\n                    break;\r\n                case 2:\r\n                    arr = [...products];\r\n                    arr.sort((a:ProductModel, b:ProductModel)=> a.product_title!.toUpperCase() !== b.product_title!.toUpperCase() ? a.product_title!.toUpperCase() > b.product_title!.toUpperCase() ? -1 : 1 : 0 );  \r\n                    setProducts(arr);\r\n                    break;\r\n                default:\r\n                    arr=[...products];\r\n                    setProducts(arr);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    function CheckSearchOrCat(title:string) {\r\n        switch (title) {\r\n            case 'Tìm kiếm':\r\n                if (productSearch) {\r\n                    setProducts(productSearch!);\r\n                    setIsLoading(true);\r\n                }\r\n                else{\r\n                    setProducts([]);\r\n                    setIsLoading(true);\r\n                }\r\n                break;\r\n            default:\r\n                if (productCategory) {\r\n                    setProducts(productCategory!);\r\n                    setIsLoading(true);\r\n                }\r\n                else{\r\n                    setProducts([]);\r\n                    setIsLoading(true);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        CheckSearchOrCat(title)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        switch (title) {\r\n            case 'Tìm kiếm':\r\n                if (productSearch) {\r\n                    setProducts(productSearch!);\r\n                    setIsLoading(true);\r\n                }\r\n                else{\r\n                    setProducts([]);\r\n                    setIsLoading(true);\r\n                }\r\n                break;\r\n            default:\r\n                if (productCategory) {\r\n                    setProducts(productCategory!);\r\n                    setIsLoading(true);\r\n                }\r\n                else{\r\n                    setProducts([]);\r\n                    setIsLoading(true);\r\n                }\r\n                break;\r\n        }\r\n    }, [productState])\r\n\r\n    useEffect(() => {\r\n        switch (title) {\r\n            case 'Tìm kiếm':\r\n                dispatch(getProductsSearch(data, page));\r\n                break;\r\n            default:\r\n                dispatch(getProductsCategory(data, page));\r\n                break;\r\n        }\r\n    }, [page])\r\n\r\n    const searchProduct = (data: any) => {\r\n        navigate('Search', { data })\r\n    }\r\n\r\n    const isCloseToBottom = ({ layoutMeasurement, contentOffset, contentSize }: any) => {\r\n        const paddingToBottom = 20;\r\n        return layoutMeasurement.height + contentOffset.y >=\r\n            contentSize.height - paddingToBottom;\r\n    };\r\n\r\n    return (\r\n        !isLoading ?\r\n            (<SafeAreaView style={styles.container}>\r\n                <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n            </SafeAreaView>) : (\r\n                <SafeAreaView style={styles.container}>\r\n\r\n                    <View style={styles.searchContainer}>\r\n                        <SearchBarTop onSearch={searchProduct} />        \r\n                    </View>\r\n                   \r\n                    <View style={{ flex: 1, marginTop: 30, backgroundColor: '#E5E5E5' }}>\r\n                        <View style={{paddingVertical:10,backgroundColor:'#ffffff',marginBottom:15}}>\r\n                            <Text style={{textAlign:'center',fontSize:18,color:'#222'}}>{title}</Text>\r\n                            <View style={styles.header}>\r\n                                <TouchableOpacity>\r\n                                    <MaterialIcons style={styles.headerIcon} name=\"arrow-back\" size={25} color=\"white\" onPress={() => navigation.goBack()} />\r\n                                </TouchableOpacity>\r\n                            </View>    \r\n                        </View>\r\n                        <View style={{ flexDirection: 'row', padding: 10, marginBottom: 10 }}>\r\n                            <View style={{ flex: 1, borderRadius: 50, paddingRight: 10 }}>\r\n                                <View style={{ borderWidth: 1, borderColor: '#888' }}>\r\n                                    <RNPickerSelect\r\n                                        placeholder={{ label: \"Filter\", value: 0 }}\r\n                                        style={{ ...pickerSelectStyles, placeholder: { color: '#555' } }}\r\n                                        onValueChange={(data) => filterPrice(data)}\r\n                                        items={[\r\n                                            { label: '< 1.000.000đ', value: 1 },\r\n                                            { label: '1.000.000 - 10.000.000đ', value: 2 },\r\n                                            { label: '> 10.000.000đ', value: 3 },\r\n                                        ]}\r\n                                    />\r\n                                </View>\r\n                            </View>\r\n                            <View style={{ flex: 1, paddingLeft: 10 }}>\r\n\r\n                                <View style={{ borderWidth: 1, borderColor: '#888' }}>\r\n                                    <RNPickerSelect\r\n                                        placeholder={{ label: \"Sort\", value: 0 }}\r\n                                        style={{ ...pickerSelectStyles, placeholder: { color: '#555' } }}\r\n                                        onValueChange={(data) => sortName(data)}\r\n                                        items={[\r\n                                            { label: 'A - Z', value: 1 },\r\n                                            { label: 'Z - A', value: 2 },\r\n                                        ]}\r\n                                    />\r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n                        <ScrollView                         \r\n                            onScroll={({ nativeEvent }) => {\r\n                                if (isCloseToBottom(nativeEvent)) {\r\n                                    setPage(page + 1);\r\n                                }\r\n                            }}\r\n                            scrollEventThrottle={400}\r\n                            >\r\n                            <View style={styles.productList}>\r\n                                {\r\n                                    products.length > 0 ? products.map((product, index) => <Product onTap={onTapDetail} key={index} product={product} />) \r\n                                    :\r\n                                    <View style={{flex:1,justifyContent:'center',alignItems:'center'}}>\r\n                                        <Text style={{fontSize:20,color:'#222'}}>Không có sản phẩm</Text>\r\n                                    </View>\r\n                                }\r\n                            </View>\r\n                        </ScrollView>\r\n\r\n                    </View>\r\n                </SafeAreaView>\r\n            )\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    header: {\r\n        flexDirection:'row',\r\n        justifyContent:'space-between',\r\n        padding: 5,\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        zIndex:2\r\n    },\r\n    headerIcon: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.6)',\r\n        borderRadius: 50,\r\n        padding: 5\r\n    },\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: COLORS.primary,\r\n    },\r\n    searchContainer: {\r\n        marginTop: 30,\r\n\r\n    },\r\n    productList: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent:'space-around',\r\n        flexWrap:'wrap'\r\n    }\r\n});\r\nconst pickerSelectStyles = StyleSheet.create({\r\n    inputIOS: {\r\n        fontSize: 20,\r\n        borderRadius: 30,\r\n        color: 'black',\r\n        padding: 20,\r\n\r\n    },\r\n    inputAndroid: {\r\n        fontSize: 20,\r\n        borderRadius: 30,\r\n        color: 'black',\r\n        padding: 20\r\n    },\r\n\r\n});"]},"metadata":{},"sourceType":"module"}